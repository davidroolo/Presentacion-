var sas=window.sas||{};sas.tower||(sas.tower=function(e){var t=this;t.d=document,t.w=window,t.c=e,t.countImpression=!1,t.logOn=!1,t.preview=!1,t.renderedWidth=t.c.creative.width,t.renderedHeight=t.c.creative.height,t.addElement=function(e,i,n){var d=t.d.createElement(e);for(var a in n)d.setAttribute(a,n[a]);return i.appendChild(d),d},t.log=function(e){t.logOn&&console.log(arguments)},t.createMultiBrowserCss=function(e){return"-moz-"+e+";-webkit-"+e+";-ms-"+e+";-o-"+e+";"+e+";"},t.tracking=function(e){e&&((new Image).src=e)},t.addEvent=function(e,t,i){e&&t&&i&&(e.addEventListener?e.addEventListener(t,i,!1):e.attachEvent&&e.attachEvent("on"+t,i))},t.addCss=function(){var e,i=t.d.createElement("style");i.type="text/css",0===t.c.creative.type||4===t.c.creative.type?e="iframe":1===t.c.creative.type&&(e="#sas_img_"+t.c.creative.id);var n=["#sas_container_"+t.c.insertionId+"{width:"+t.renderedWidth+"px;height:100%;position:absolute;left:0; right:0; margin: 0 auto;}","#sas_divAbs_"+t.c.insertionId+"{width:"+t.renderedWidth+"px;height:"+t.renderedHeight+"px;position:absolute;}","#sas_divAbs_"+t.c.insertionId+" "+e+"{width:"+t.renderedWidth+"px; height:"+t.renderedHeight+"px}"].join("\r\n");i.styleSheet?i.styleSheet.cssText=n:i.appendChild(t.d.createTextNode(n)),t.d.getElementsByTagName("head")[0].appendChild(i)},t.addEvent=function(e,t,i){e&&t&&i&&(e.addEventListener?e.addEventListener(t,i,!1):e.attachEvent&&e.attachEvent("on"+t,i))},t.addImage=function(e){var t="";return""!==e.url&&(""!==e.oryginalClickUrl&&(t+='<a href="'+e.clickUrl+'" target="'+("_blank"===e.clickTarget?"_blank":"_self")+'" >'),t+='<img id="sas_img_'+e.id+'" src="'+e.url+'" alt="" style="margin:0;padding:0;border:0;"/>',""!==e.oryginalClickUrl&&(t+="</a>")),t},t.offsetTop=function(e){var t=0;do{isNaN(e.offsetTop)||(t+=e.offsetTop)}while(e=e.offsetParent);return t},t.calculateChildrenHeight=function(e){for(var t=0,i=0;i<e.childNodes.length;i++)t+=parseInt(e.childNodes[i].clientHeight)||0;return t},t.prepareParams=function(){if(t.adPlacement=t.d.getElementById(t.c.tagId),!t.adPlacement&&"undefined"!=typeof inDapIF&&window.inDapIF){var e=window.frameElement;t.adPlacement=t.d.createElement("DIV"),t.adPlacement.setAttribute("id",t.c.tagId),e.parentNode.insertBefore(t.adPlacement,e)}var i=t.calculateChildrenHeight(t.adPlacement.parentElement),n=t.adPlacement.clientWidth;t.renderedWidth=-1!==t.c.other.maxWidth.indexOf("%")?Math.floor(t.c.other.maxWidth.replace("%","")/100*n):t.c.other.maxWidth.replace("px","");var d=Math.round(t.c.creative.width/t.c.creative.height*100)/100;t.renderedHeight=1/d*t.renderedWidth,t.placementHeight=t.c.other.columnHeight||t.adPlacement.parentElement.clientHeight-i-t.c.other.offsetY,t.adPlacement.style.height=t.placementHeight>t.renderedHeight?t.placementHeight+"px":t.renderedHeight+"px",t.adPlacement.style.position="relative",t.adPlacement.style.marginTop=t.c.other.offsetY+"px",t.container=t.addElement("div",t.adPlacement,{id:"sas_container_"+t.c.insertionId}),t.divAbs=t.addElement("div",t.container,{id:"sas_divAbs_"+t.c.insertionId})},t.stick=function(){if(!(t.adPlacement.clientHeight<=t.renderedHeight)){var e=t.d.body.scrollTop||t.d.documentElement.scrollTop||t.w.pageYOffset||0,i=t.offsetTop(t.divAbs)+t.renderedHeight+e,n=t.offsetTop(t.container)+t.container.clientHeight-e;n>t.container.clientHeight+t.c.other.offsetY?(t.log("sticked to top of the container"),t.divAbs.style.position="absolute",t.divAbs.style.bottom="auto",t.divAbs.style.top=0):i>n?(t.log("sticked to the bottom of the container"),t.divAbs.style.position="absolute",t.divAbs.style.bottom=0,t.divAbs.style.top="auto",n>t.renderedHeight+t.c.other.offsetY&&(t.log("fixed to top"),t.divAbs.style.position="fixed",t.divAbs.style.bottom="auto",t.divAbs.style.top=t.c.other.offsetY+"px")):(t.log("fixed to top"),t.divAbs.style.position="fixed",t.divAbs.style.bottom="auto",t.divAbs.style.top=t.c.other.offsetY+"px")}},t.addCreative=function(e,i){if(0===t.c.creative.type){var n=t.addElement("iframe",i,{src:"about:blank",width:t.renderedWidth+"px",height:"100%",frameBorder:"0",scrolling:"no",marginheight:"0",marginwidth:"0"}).contentWindow.document;n.open("text/html","replace"),n.write('<!DOCTYPE html><head></head><body style="padding:0;margin:0 auto"><script>var inDapIF=false;<\/script>'+t.c.creative.agencyCode+"</body></html>"),n.close()}else if(4===t.c.creative.type){for(var d="",a=0;a<t.c.creative.clickUrlArray.length;a++)d+=0===a?"&clicktag="+encodeURIComponent(t.c.creative.clickUrlArray[a]):"&clicktag"+(a+1)+"="+encodeURIComponent(t.c.creative.clickUrlArray[a]);var r=t.c.creative.url+(t.c.creative.url.indexOf("?")<0?"?":"&")+"sasfid="+t.c.formatId+d;t.ifr=t.addElement("iframe",i,{src:r,width:t.c.creative.width+"px",height:"100%",frameBorder:"0",scrolling:"no",marginheight:"0",marginwidth:"0"}),t.addEvent(t.w,"message",function(e){if(e.data&&t.c.creative&&t.c.formatId===Number(e.data)){var i={clickUrls:t.c.creative.clickUrlArray,isSmart:!0};e.source.postMessage(JSON.stringify(i),"*")}})}else i.innerHTML=t.addImage(t.c.creative);t.addEventsOneTime||(t.addEventsOneTime=!0,t.addEvent(t.w,"scroll",function(e){t.stick()})),t.stick()},t.countImpressionFunc=function(){t.log("countImpression"),t.countImpression=!0,t.c.smartTrackingUrl&&t.tracking(t.c.smartTrackingUrl),t.c.other.trackingUrl&&t.tracking(t.c.other.trackingUrl)},t.buildTestContent=function(){var e=t.d.createElement("style");e.type="text/css";var i=["table img{display:none;}"].join("\r\n");e.styleSheet?e.styleSheet.cssText=i:e.appendChild(t.d.createTextNode(i)),t.d.getElementsByTagName("head")[0].appendChild(e);var n=t.addElement("div",t.d.body,{});n.style.width="100%",n.style.height="1500px",t.d.body.appendChild(n);var d=t.addElement("div",n,{});d.style.width="75%",d.style.height="1500px",d.style.float="left",d.style.border="1px solid black",d.style.boxSizing="border-box";var a=t.addElement("p",t.d.body,{});a.style.lineHeight="1000px",a.style.textAlign="center",a.innerHTML="Main column",d.appendChild(a);var r=t.addElement("div",n,{});r.style.width="25%",r.style.height="1500px",r.style.float="left",d.style.border="1px solid black",d.style.boxSizing="border-box";var o=t.addElement("div",r,{});o.style.width="80%",o.style.height="200px",o.style.marginLeft="10%",o.style.marginTop="10%",o.style.border="1px solid black",o.style.boxSizing="border-box";var c=t.addElement("p",t.d.body,{});c.style.lineHeight="200px",c.style.textAlign="center",c.innerHTML="Content banner",o.appendChild(c);var l=t.addElement("div",t.d.body,{});l.style.width="100%",l.style.height="300px",l.style.float="left",l.style.border="1px solid black",l.style.boxSizing="border-box";var s=t.addElement("p",t.d.body,{});s.style.lineHeight="300px",s.style.textAlign="center",s.innerHTML="Footer",l.appendChild(s);var h=t.d.getElementById(t.c.tagId);r.appendChild(h)},t.renderAd=function(){t.log("renderAd"),t.countImpression||t.countImpressionFunc(),t.prepareParams(),t.addCss(),t.addCreative(t.c.creative,t.divAbs),t.viewabilityCount()},t.viewabilityCount=function(){var e=this,t={};t[e.c.creative.id]={viewable:[e.c.viewability.viewUrl],notviewable:[],undetermined:[e.c.viewability.errorUrl]},sas.utils.loadScriptCdn("diff/templates/ts/dist/viewability/sas-viewability-1.0.js",{onLoad:function(){(new window.Viewability).init(e.divAbs,t)}})},t.addFixes=function(){Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){for(var i=t||0,n=this.length;i<n;i++)if(this[i]===e)return i;return-1})},t.addReadyFunc=function(){!function(e,i){"use strict";e=e||"docReady";var n=[],d=!1,a=!1;function r(){if(!d){d=!0;for(var e=0;e<n.length;e++)n[e].fn.call(t.w,n[e].ctx);n=[]}}function o(){"complete"===t.d.readyState&&r()}(i=i||t.w)[e]=function(e,i){d?setTimeout(function(){e(i)},1):(n.push({fn:e,ctx:i}),"complete"===t.d.readyState||!t.d.attachEvent&&"interactive"===t.d.readyState?setTimeout(r,1):a||(t.d.addEventListener?(t.d.addEventListener("DOMContentLoaded",r,!1),t.w.addEventListener("load",r,!1)):(t.d.attachEvent("onreadystatechange",o),t.w.attachEvent("onload",r)),a=!0))}}("docReady",t)},t.init=function(){t.d.getElementById("sas_previewContainer")&&t.buildTestContent(),"undefined"!=typeof inDapIF&&window.inDapIF&&(t.d=window.parent.document,t.w=window.parent),t.addFixes(),t.addReadyFunc(),t.docReady(function(){t.renderAd()})}});